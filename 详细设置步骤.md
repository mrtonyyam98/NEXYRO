# 📚 Nexyro 项目详细设置步骤（白话版）

## 🎯 项目简介

这是一个**项目管理应用**，就像 Trello 或 Asana 一样。用户可以：
- 注册登录
- 创建工作空间（组织）
- 邀请团队成员
- 创建项目和任务
- 分配任务给成员
- 收到任务提醒邮件

---

## 📦 第一步：检查你的电脑环境

### 1.1 检查 Node.js 是否安装

打开终端（Terminal），输入：
```bash
node --version
```

**你应该看到**：`v18.0.0` 或更高的版本

✅ **如果已经安装**：继续下一步
❌ **如果没有安装**：去 https://nodejs.org 下载安装

---

## 🔧 第二步：安装项目依赖（就像给项目装工具）

### 2.1 安装前端依赖

1. **打开终端**，进入项目目录：
   ```bash
   cd /Users/tonymumu/Desktop/nexyro/client
   ```

2. **安装依赖**（这就像给项目安装所有需要的工具包）：
   ```bash
   npm install
   ```
   
   ⏳ **等待时间**：大约 1-3 分钟，会下载很多文件
   
   ✅ **成功标志**：看到 "added XXX packages" 这样的提示，并且出现 `node_modules` 文件夹

### 2.2 安装后端依赖

1. **打开新的终端窗口**（或者先停止前端，再切换目录）：
   ```bash
   cd /Users/tonymumu/Desktop/nexyro/server
   ```

2. **安装依赖**：
   ```bash
   npm install
   ```
   
   ⏳ **等待时间**：大约 1-3 分钟
   
   ✅ **成功标志**：看到 "added XXX packages" 这样的提示

---

## 🔑 第三步：注册服务账户（就像申请账号）

这个项目需要用到几个外部服务，就像你需要：
- **Clerk** = 负责登录注册（就像微信登录、Google登录）
- **Neon** = 数据库（存储所有数据的地方）
- **Brevo** = 发邮件服务（发送任务提醒邮件）
- **Inngest** = 后台任务（定时发送邮件提醒）

### 3.1 注册 Clerk（最重要！）

**为什么需要**：Clerk 负责用户登录、注册、创建组织等功能

**步骤**：

1. **打开浏览器**，访问：https://dashboard.clerk.com
2. **点击 "Sign Up"** 或 "Sign In"
   - 可以用 Google 账号登录（最简单）
   - 或者用邮箱注册
3. **创建应用**：
   - 点击 "Create Application" 按钮
   - 应用名称填写：`project-management` 或任何你喜欢的名字
   - 选择登录方式：勾选 "Email" 和 "Google"（推荐）
   - 点击 "Create Application"
4. **获取密钥**：
   - 在 Dashboard 页面，找到 **"API Keys"** 部分
   - 你会看到两个密钥：
     - **Publishable Key**（公钥，以 `pk_test_` 开头）→ 这个给前端用
     - **Secret Key**（密钥，以 `sk_test_` 开头）→ 这个给后端用
   - **重要**：先复制这两个密钥，保存到记事本，待会儿要用！

### 3.2 注册 Neon Database（数据库）

**为什么需要**：所有数据（用户、项目、任务）都存在这里

**步骤**：

1. **打开浏览器**，访问：https://neon.tech
2. **点击 "Sign Up"**（可以用 GitHub 账号登录，最简单）
3. **创建项目**：
   - 点击 "Create Project"
   - 项目名称：`project-management` 或任何名字
   - 选择区域：选离你最近的（比如 `US East`）
   - 点击 "Create Project"
4. **获取连接字符串**：
   - 项目创建后，会看到一个连接字符串，类似：
     ```
     postgresql://username:password@host/database?sslmode=require
     ```
   - 复制这个字符串，保存到记事本
   - **注意**：Neon 会给你两个连接字符串：
     - **Connection String** → 这个用作 `DATABASE_URL`
     - **Direct Connection String** → 这个用作 `DIRECT_URL`
   - 两个都复制保存！

### 3.3 注册 Brevo（邮件服务）

**为什么需要**：发送任务分配和提醒邮件

**步骤**：

1. **打开浏览器**，访问：https://www.brevo.com
2. **点击 "Sign Up"** 注册账号
3. **验证邮箱**：注册后去邮箱点击验证链接
4. **获取 SMTP 凭证**：
   - 登录后，点击左侧菜单的 **"SMTP & API"**
   - 或者搜索 "SMTP"
   - 找到 **"SMTP"** 部分，点击 "Generate new SMTP key"
   - 会显示：
     - **SMTP Server**: `smtp-relay.brevo.com`
     - **Port**: `587`
     - **Login**（用户名）→ 这个就是 `SMTP_USER`
     - **Password**（密码）→ 这个就是 `SMTP_PASS`
   - 复制这两个，保存到记事本
5. **设置发件人邮箱**：
   - 在 Brevo 中，找到 "Sender" 或 "From Email"
   - 添加你的邮箱地址（比如 `yourname@gmail.com`）
   - 验证这个邮箱（会收到验证邮件）
   - 这个邮箱地址就是 `SENDER_EMAIL`

### 3.4 注册 Inngest（可选，但推荐）

**为什么需要**：处理后台任务，比如定时发送邮件提醒

**步骤**：

1. **打开浏览器**，访问：https://www.inngest.com
2. **点击 "Sign Up"**（可以用 GitHub 账号）
3. **创建应用**：
   - 点击 "Create App"
   - 应用名称：`project-management`
   - 点击 "Create"
4. **获取密钥**（如果需要）：
   - 在设置中找到 API Keys
   - 复制保存（这个可以稍后配置）

---

## 📝 第四步：创建环境变量文件（配置密钥）

环境变量文件就像是一个"密码本"，存储所有重要的密钥和配置。

### 4.1 创建前端环境变量文件

1. **打开 VS Code**（或任何代码编辑器）
2. **打开项目文件夹**：`/Users/tonymumu/Desktop/nexyro`
3. **在 `client` 文件夹下创建新文件**：
   - 文件名：`.env`（注意前面有个点！）
   - 位置：`client/.env`
4. **在文件中写入以下内容**：
   ```env
   VITE_BASEURL=http://localhost:5000
   VITE_CLERK_PUBLISHABLE_KEY=你的_clerk_公钥_粘贴这里
   ```
   
   **说明**：
   - `VITE_BASEURL`：后端服务器的地址，开发时用 `http://localhost:5000`
   - `VITE_CLERK_PUBLISHABLE_KEY`：把第三步从 Clerk 复制的 Publishable Key 粘贴到这里

5. **保存文件**（Ctrl+S 或 Cmd+S）

### 4.2 创建后端环境变量文件

1. **在 `server` 文件夹下创建新文件**：
   - 文件名：`.env`
   - 位置：`server/.env`
2. **在文件中写入以下内容**：
   ```env
   # 数据库配置
   DATABASE_URL=你的_neon_数据库连接字符串_粘贴这里
   DIRECT_URL=你的_neon_直接连接字符串_粘贴这里
   
   # Clerk 配置
   CLERK_SECRET_KEY=你的_clerk_密钥_粘贴这里
   
   # 邮件服务配置
   SMTP_USER=你的_brevo_smtp_用户名_粘贴这里
   SMTP_PASS=你的_brevo_smtp_密码_粘贴这里
   SENDER_EMAIL=你的_发件人邮箱_粘贴这里
   
   # 服务器配置
   PORT=5000
   ```
   
   **说明**：
   - 把第三步保存的所有密钥，按照对应的位置粘贴进去
   - 注意：不要有空格，不要有引号（除非密钥本身有引号）
   
3. **保存文件**

---

## 🗄️ 第五步：初始化数据库（创建数据表）

数据库就像是一个空仓库，我们需要先创建"货架"（数据表）才能存东西。

### 5.1 生成 Prisma 客户端

1. **打开终端**，进入 server 目录：
   ```bash
   cd /Users/tonymumu/Desktop/nexyro/server
   ```

2. **生成 Prisma 客户端**：
   ```bash
   npx prisma generate
   ```
   
   ⏳ **等待时间**：大约 10-30 秒
   
   ✅ **成功标志**：看到 "Generated Prisma Client" 这样的提示

### 5.2 创建数据库表

1. **推送数据库结构到 Neon**：
   ```bash
   npx prisma db push
   ```
   
   ⏳ **等待时间**：大约 10-30 秒
   
   ✅ **成功标志**：看到 "Your database is now in sync" 这样的提示
   
   **如果出错**：
   - 检查 `.env` 文件中的 `DATABASE_URL` 和 `DIRECT_URL` 是否正确
   - 检查网络连接
   - 确认 Neon 项目已创建

---

## 🚀 第六步：启动项目（让项目跑起来）

### 6.1 启动后端服务器

1. **打开终端**，进入 server 目录：
   ```bash
   cd /Users/tonymumu/Desktop/nexyro/server
   ```

2. **启动服务器**：
   ```bash
   npm run server
   ```
   
   或者：
   ```bash
   npm start
   ```
   
   ⏳ **等待时间**：几秒钟
   
   ✅ **成功标志**：看到类似这样的提示：
   ```
   Server running on port 5000
   ```
   
   **重要**：这个终端窗口要保持打开，不要关闭！

### 6.2 启动前端应用

1. **打开新的终端窗口**（或者新开一个标签页）
2. **进入 client 目录**：
   ```bash
   cd /Users/tonymumu/Desktop/nexyro/client
   ```

3. **启动前端**：
   ```bash
   npm run dev
   ```
   
   ⏳ **等待时间**：几秒钟
   
   ✅ **成功标志**：看到类似这样的提示：
   ```
   VITE v7.x.x  ready in xxx ms
   
   ➜  Local:   http://localhost:5173/
   ➜  Network: use --host to expose
   ```

4. **打开浏览器**，访问：http://localhost:5173
   
   🎉 **如果看到登录页面**：说明前端启动成功！

---

## ✅ 第七步：测试功能

### 7.1 测试登录

1. **在浏览器中**，点击 "Sign In" 或 "Sign Up"
2. **使用 Clerk 登录**：
   - 可以用 Google 账号登录
   - 或者用邮箱注册新账号
3. **创建组织**：
   - 登录后，会提示创建组织（Workspace）
   - 输入组织名称，比如 "我的公司"
   - 点击创建
4. **查看仪表板**：
   - 如果能看到仪表板页面，说明登录成功！

### 7.2 测试创建项目

1. **点击 "New Project" 按钮**
2. **填写项目信息**：
   - 项目名称
   - 描述
   - 选择状态、优先级
   - 选择团队负责人
3. **点击 "Create Project"**
4. **如果项目出现在列表中**：说明创建成功！

---

## 🐛 常见问题解决

### 问题1：前端无法连接后端

**症状**：浏览器控制台显示网络错误

**解决方法**：
1. 检查后端是否在运行（终端应该显示 "Server running on port 5000"）
2. 检查 `client/.env` 中的 `VITE_BASEURL` 是否为 `http://localhost:5000`
3. 重启前端：按 `Ctrl+C` 停止，然后重新运行 `npm run dev`

### 问题2：登录失败

**症状**：点击登录没有反应，或显示错误

**解决方法**：
1. 检查 `client/.env` 中的 `VITE_CLERK_PUBLISHABLE_KEY` 是否正确
2. 检查 `server/.env` 中的 `CLERK_SECRET_KEY` 是否正确
3. 确认前后端使用的是同一个 Clerk 应用
4. 检查浏览器控制台的错误信息

### 问题3：数据库连接失败

**症状**：后端启动时报数据库错误

**解决方法**：
1. 检查 `server/.env` 中的 `DATABASE_URL` 和 `DIRECT_URL` 是否正确
2. 确认 Neon 项目已创建且运行中
3. 检查网络连接
4. 尝试重新复制连接字符串

### 问题4：邮件发送失败

**症状**：创建任务后没有收到邮件

**解决方法**：
1. 检查 `server/.env` 中的 SMTP 配置是否正确
2. 确认 Brevo 账户已验证
3. 检查发件人邮箱是否已验证
4. 查看后端终端中的错误信息

---

## 📋 完整检查清单

在开始使用前，确认以下所有项都已完成：

- [ ] Node.js 已安装（v18+）
- [ ] 前端依赖已安装（`client/node_modules` 存在）
- [ ] 后端依赖已安装（`server/node_modules` 存在）
- [ ] Clerk 账户已注册，密钥已获取
- [ ] Neon Database 已创建，连接字符串已获取
- [ ] Brevo 账户已注册，SMTP 凭证已获取
- [ ] 前端 `.env` 文件已创建并配置
- [ ] 后端 `.env` 文件已创建并配置
- [ ] 数据库已初始化（`npx prisma db push` 成功）
- [ ] 后端服务器可以启动（显示 "Server running on port 5000"）
- [ ] 前端应用可以启动（可以访问 http://localhost:5173）
- [ ] 可以成功登录
- [ ] 可以创建组织
- [ ] 可以创建项目

---

## 🎓 下一步

设置完成后，你可以：

1. **探索功能**：
   - 创建多个工作空间
   - 邀请团队成员
   - 创建项目和任务
   - 测试邮件通知

2. **自定义项目**：
   - 修改样式和颜色
   - 添加新功能
   - 修改界面布局

3. **部署到线上**：
   - 使用 Vercel 部署前端
   - 使用 Vercel 部署后端
   - 配置生产环境变量

---

## 💡 提示

- **保持终端打开**：运行项目时，前后端的终端窗口都要保持打开
- **查看日志**：如果出错，先看终端中的错误信息
- **浏览器控制台**：按 F12 打开开发者工具，查看 Console 标签页的错误
- **保存密钥**：所有密钥都要妥善保存，不要泄露

---

祝你设置顺利！如果遇到问题，随时问我！🚀

